# This is an Anaconda project file.
# It describes the project and how it can be run.
# The file is in YAML format, please see http://www.yaml.org/start.html for more.

name: ProjectTime
description: A tool that can be used to keep track of time spent on projects.

# lists runnable scripts, notebooks, and other code.
commands: {
  postgres: {unix: sh scripts/postgres.sh, env_spec: database},
  pg_ctl: {unix: sh scripts/pg_ctl.sh, env_spec: database},
  django-admin: {unix: django-admin, env_spec: application},
  manage.py: {unix: sh scripts/manage.sh, env_spec: application},
  coverage: {unix: sh scripts/coverage.sh, env_spec: test},
  robot: {unix: sh scripts/robot.sh, env_spec: test-acceptance},
  robot.tidy: {unix: python -m robot.tidy, env_spec: test-acceptance},
  ipython-kernel-create: {unix: sh scripts/ipython-kernel-create.sh, env_spec: devtools},
  jupyter: {unix: sh scripts/jupyter.sh, env_spec: notebook},
  setup.py: { unix: python setup.py, env_spec: build-pypi},
  conda-build: {unix: conda-build, env_spec: build-conda}
}

# lists any environment variables the code depends on.
variables: {
  VERSION: 1.0.0
}

# lists any services that should be available before the code runs.
services: {}

# lists any URLs to download to local files
downloads: {}

# lists any packages that must be installed before the code runs.
packages: []

# list the channels that are used to install packages
channels: [conda-forge]

# lists platforms the project should work on
platforms:
- linux-64
- osx-64
- win-64

# Multiple, named environment specs can be defined.
# Each inherits any global packages or channels,
# but can have its own unique ones also.
env_specs:
  # Environments for locking consistent package versions for use in
  # multiple envs.
  _python:
    packages:
      - python=3.7

  # Environments for running project commands.
  database:
    inherit_from: []
    packages:
      - postgresql=11.5
  application:
    inherit_from: [_python]
    packages:
      - psycopg2=2.8
      - sqlparse=0.3
      - pytz=2019.3
      - django=2.2
      - pandas=0.25
      - bokeh=1.4
  application-debug:
    inherit_from: [application]
    packages:
      - django-debug-toolbar=2.0
    variables: {
      DJANGO_SETTINGS_MODULE: "config.settings-debug"
    }
  devtools:
    inherit_from: [application-debug]
    packages:
      - ipykernel
      - pylint
      - pep8
      - autopep8
  test:
    inherit_from: [application]
    packages:
      - coverage
  test-acceptance:
    inherit_from: [application]
    packages:
      - robotframework
      - robotframework-seleniumlibrary
      - python-chromedriver-binary >=78,<79
      - geckodriver
    variables: {
      DJANGO_SETTINGS_MODULE: "config.settings"
    }
  notebook:
    inherit_from: [_python]
    packages:
      - jupyterlab
  build-pypi:
    inherit_from: [_python]
    packages:
      - setuptools
      - pyyaml
  build-conda:
    inherit_from: [_python, build-pypi]
    packages:
      - conda
      - conda-build
