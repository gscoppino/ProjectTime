{% extends 'project/base_nav.html' %}

{% block title %}ProjectTime | Projects{% endblock %}
{% block content %}
    {{ block.super }}
    <main class="container is-fluid mt-3">
        <section class="hero">
            <div class="pl-0 hero-body">
                <p class="title">Projects</p>
                <p class="subtitle">Project are associated with charges.</p>
            </div>
        </section>
        <div class="panel is-link">
            <header class="panel-heading">
                <div class="is-flex is-flex-direction-row is-align-items-center">
                    <p>Project List</p>
                    <div class="is-flex-grow-1"></div>
                    <a class="ml-4 button is-link is-light" href="{% url 'project:project-create' %}">+ Create Project</a>
                </div>
            </header>
            <div class="panel-block">
                <table class="table is-bordered is-striped is-hoverable is-fullwidth">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Active</th>
                            <th>Last Charge</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for project in page_obj %}
                        <tr>
                            <td>{{ project.name }}</td>
                            <td>{{ project.active }}</td>
                            <td>{{ project.db__latest_charge }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="panel-block">
                <nav class="pagination is-centered" role="navigation" aria-label="pagination" style="width: 100%">
                    <a class="pagination-previous"
                        {% if page_obj.has_previous %}
                        href="?page=1"
                        {% else %}
                        disabled
                        {% endif %}>
                        &laquo; First
                    </a>
                    <a class="pagination-previous"
                        {% if page_obj.has_previous %}
                        href="?page={{ page_obj.previous_page_number }}"
                        {% else %}
                        disabled
                        {% endif %}>
                        Previous
                    </a>

                    <a class="pagination-next"
                        {% if page_obj.has_next %}
                        href="?page={{ page_obj.next_page_number }}"
                        {% else %}
                        disabled
                        {% endif %}>
                        Next
                    </a>
                    <a class="pagination-next"
                        {% if page_obj.has_next %}
                        href="?page={{ page_obj.paginator.num_pages }}"
                        {% else %}
                        disabled
                        {% endif %}>
                        Last &raquo;
                    </a>

                    <ul class="pagination-list">
                        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                    </ul>
                </div>
            </div>
        </div>
    </main>
{% endblock %}
